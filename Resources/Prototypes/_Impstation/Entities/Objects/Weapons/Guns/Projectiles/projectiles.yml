- type: entity
  id: BulletGrenadeCleaner
  name: cleaner grenade
  categories: [ HideSpawnMenu ]
  components:
  - type: CollisionWake
  - type: Physics
    bodyType: Dynamic
    fixedRotation: false
  - type: Sprite
    sprite: Objects/Weapons/Guns/Projectiles/projectiles2.rsi
    layers:
      - state: frag
  - type: SmokeOnTrigger
    duration: 15
    spreadAmount: 5
    smokePrototype: Foam
    solution:
      reagents:
      - ReagentId: SpaceCleaner
        Quantity: 50
  - type: Ammo
    muzzleFlash: null
  - type: PointLight
    radius: 3.5
    color: blue
    energy: 0.5
  - type: TileFrictionModifier
    modifier: 0.01
  - type: Fixtures
    fixtures:
      bouncer:
        shape:
          !type:PhysShapeCircle
          Radius: 0.1
        density: 20
        mask:
        - ItemMask
        restitution: 0.9  # 90% bouncy
        friction: 0.3
  - type: TimedDespawn
    lifetime: 5
  - type: TriggerOnCollide
    fixtureID: bouncer
    #todos
    #restore old cleanade projectile?
      #make this a new flavour of cleanade in general?
      #something something clean-puck?
      #that might need a shit ton of wierd extra code though
      #stuff like an EnableTriggers comp / event
      #or triggerOnThrown?
      #would be wierd either way
      #will want to look into it eventually though
    #create SpreadSmokePassively comp & system - turn into a more broad TriggerOnInterval thing? or just
    #create EmitSmokeOnDespawn comp & system - will also need a TriggerOnTimedDespawn event / method in TriggerSystem
    #create projectileSpeedModifier component & system - oh god this will be a lot of boring work
      #basic idea though - goes on the ammo entity & subscribes to any relevant ammoProvider component events
      #on refresh modifiers, check what would be about to be shot, then check if it's the right proto, then modify proj speed accordingly
      #this sucks but at least it'll hopefully work
      #scratch that, the whole gun system is too pusk to do this easily, might make that an upstream PR

- type: entity #BaseBullet isnt declared globally I guess? if its not here then the game doesnt build bc it cant find the parent for bullets in this file.
  id: ImpstationBaseBullet
  name: BaseBullet
  description: If you can see this you're probably dead!
  abstract: true
  components:
  - type: Reflective
  - type: FlyBySound
  - type: Clickable
  - type: Sprite
    noRot: false
    sprite: Objects/Weapons/Guns/Projectiles/projectiles2.rsi
    layers:
    - state: bullet
      shader: unshaded
  - type: Physics
    bodyType: Dynamic
    linearDamping: 0
    angularDamping: 0
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.1,-0.1,0.1,0.1"
        hard: false
        mask:
        - Impassable
        - BulletImpassable
      fly-by: &flybyfixture
        shape: !type:PhysShapeCircle
          radius: 1.5
        layer:
        - Impassable
        - MidImpassable
        - HighImpassable
        - LowImpassable
        hard: False
  - type: Projectile
    impactEffect: BulletImpactEffect
    damage:
      types:
        Piercing: 14
    soundHit:
      path: /Audio/Weapons/Guns/Hits/bullet_hit.ogg
  - type: TimedDespawn
    lifetime: 10

- type: entity
  name : disabler bolt
  id: BulletDisablerQuad
  parent: ImpstationBaseBullet #I hate you yaml
  categories: [ HideSpawnMenu ]
  components:
  - type: Reflective
    reflective:
    - Energy
  - type: FlyBySound
    sound:
      collection: EnergyMiss
      params:
        volume: 5
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Guns/Projectiles/quaddisabler.rsi
    layers:
    - state: omnilaser
      shader: unshaded
  - type: Physics
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.3,-0.6,0.3,0.6"
        hard: false
        mask:
        - Impassable
        - BulletImpassable
      fly-by: *flybyfixture
  - type: Ammo
  - type: StaminaDamageOnCollide
    damage: 150
  - type: Projectile
    impactEffect: BulletImpactEffectDisabler
    damage:
      types:
        Heat: 5
    soundHit:
      collection: ExplosionSmall
    forceSound: true
  - type: EmitSoundOnSpawn
    sound:
      path: /Audio/_Impstation/Effects/blipstowardsyou.ogg
  - type: PointLight
    radius: 10
    color: "#31d2ff"
    energy: 10.0

- type: entity
  name : heavy laser bolt
  id: BulletLaserHeavy #imp revert
  parent: BulletLaser
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Heat: 15

- type: entity
  name: godly laser bolt
  id: BulletLaserGold
  parent: ImpstationBaseBullet
  categories: [ HideSpawnMenu ]
  components:
  - type: Reflective
    reflective:
    - Energy
  - type: FlyBySound
    sound:
      collection: EnergyMiss
      params:
        volume: 5
  - type: Sprite
    sprite: _Impstation/Objects/Weapons/Guns/Projectiles/goldzipper.rsi
    layers:
    - state: goldlaser
      shader: unshaded
  - type: Physics
  - type: Fixtures
    fixtures:
      projectile:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.15,-0.3,0.15,0.3"
        hard: false
        mask:
        - Impassable
        - BulletImpassable
      fly-by: *flybyfixture
  - type: Ammo
  - type: Projectile
    impactEffect: GZipImpactEffect
    damage:
      types:
        Blunt: 200
        Piercing: 200
        Heat: 200
        Shock: 200
        Radiation: 200
    ignoreResistances: true
    soundHit:
      path: "/Audio/_Impstation/Weapons/Guns/Hits/gamemaker-explosion.ogg"
    forceSound: true
  - type: PointLight
    radius: 1.2
    energy: 1.34
    castShadows: false
    color: "#9b68ff"

- type: entity
  name : ungodly laser bolt
  id: BulletLaserFGold
  parent: BulletLaserGold
  categories: [ HideSpawnMenu ]
  components:
  - type: Projectile
    damage:
      types:
        Heat: 1
